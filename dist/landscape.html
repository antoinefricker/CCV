<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	
	<title>cache-cache ville</title>
	<meta name="description" content="">
	<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
	
	<link rel="stylesheet" href="theme/main.css" />
	
	<script src="js/libs.js"></script>
	<script src="js/exec-class.js"></script>
	
</head>
<body class="page">

	<header>
	</header>
	
	<canvas id="pixi-stage"></canvas>
	
	<footer></footer>
	
	<div id="player-console" class="debug-panel">
		<div>
			<span class="label">Render mode:</span>
			<span id="renderMode">-</span>
		</div>
		<div>
			<span class="label">PIXI FPS:</span>
			<span id="pixiFPS">-</span>
		</div>
		<!--
		<div>
			<span class="label">animation FPS:</span>
			<span id="animationFPS">-</span>
		</div>
		-->
		<div>
			<span class="label">source folder:</span>
			<span id="sourceFolder">-</span>
		</div>
		<div>
			<span class="label">scale:</span>
			<span id="scale">-</span>
		</div>
	</div>
	<div id="player-controls" class="debug-panel">
		<span id="indexDebug"></span>
		<button id="magnifierDisplayToggler">-</button>
		<button id="scenesShowFillToggler">-</button>
		<button id="scrollToLeft">‹</button>
		<button id="random">random</button>
		<button id="scrollToRight">›</button>
	</div>
</body>
</html>

<script>
	var cnv = document.getElementById('pixi-stage');
	var app = new CCV.app.Player(cnv, {
		magnifierDisplayStatus: true,
		scenesShowFillStatus: true
	});
	
	
	window.setInterval(function(){
		$('#pixiFPS').html(PIXI.ticker.shared.FPS.toFixed(1));
		$('#sourceFolder').html(app.scaleFolder);
		$('#scale').html(app.scale);
		$('#renderMode').html(app.getMode());
	}, 1400);
	
	$('#magnifierDisplayToggler').on('click', function(){
		app.magnifierDisplayToggle();
	});
	$(cnv).on('magnifierDisplayChange', function(e, status){
		$('#magnifierDisplayToggler').html('toggle magnifier [' + (status ? 'on' : 'off') + ']');
	});
	
	$(cnv).on('scenesShowFillChange', function(e, status){
		$('#scenesShowFillToggler').html('show red fill: [' + (status ? 'on' : 'off') + ']');
	});
	$('#scenesShowFillToggler').on('click', function(){
		app.scenesShowFillToggle();
	});
	
	$(cnv).on('sceneIndexChange', function(e, index, scene, scenesLen){
		$('#indexDebug').html(index + '/' + scenesLen + ' - #' + scene.id);
	});
	
	
	
	$('#scrollToLeft').on('click', function(){
		app.landscape.move(-1);
	});
	$('#random').on('click', function(){
		app.landscape.pickRandomScene(false);
	});
	$('#scrollToRight').on('click', function(){
		app.landscape.move(1);
	});
	
</script>